<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Excel Filtering - Data Detective Skills</title>
    <link rel="stylesheet" href="CSS/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/inter-ui/3.19.3/inter.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- External Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <!-- Excel-style CSS -->
    <style>
        .excel-table {
            border-collapse: collapse;
            width: 100%;
            font-family: 'Segoe UI', Arial, sans-serif;
            font-size: 14px;
            background: white;
            border: 1px solid #d0d7de;
        }
        
        .excel-table th {
            background: #f6f8fa;
            border: 1px solid #d0d7de;
            padding: 8px 12px;
            text-align: left;
            font-weight: 600;
            position: relative;
        }
        
        .excel-table td {
            border: 1px solid #d0d7de;
            padding: 8px 12px;
            background: white;
        }
        
        .filter-dropdown {
            position: absolute;
            right: 4px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            font-size: 12px;
            color: #656d76;
        }
        
        .filter-dropdown:hover {
            color: var(--accent-color);
        }
        
        .filter-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #d0d7de;
            border-radius: 6px;
            box-shadow: 0 8px 24px rgba(140,149,159,0.2);
            z-index: 1000;
            min-width: 200px;
            display: none;
        }
        
        .filter-menu.active {
            display: block;
        }
        
        .filter-option {
            padding: 8px 12px;
            cursor: pointer;
            border-bottom: 1px solid #f6f8fa;
        }
        
        .filter-option:hover {
            background: #f6f8fa;
        }
        
        .filter-option input {
            margin-right: 8px;
        }
        
        .excel-container {
            background: white;
            border: 1px solid #d0d7de;
            border-radius: 6px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .experiment-panel {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100vh;
            background: white;
            border-left: 2px solid var(--accent-color);
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            transition: right 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
        }
        
        .experiment-panel.active {
            right: 0;
        }
        
        .experiment-header {
            background: var(--accent-color);
            color: white;
            padding: 15px 20px;
            margin: -20px -20px 20px -20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .experiment-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #e9ecef;
        }
        
        .experiment-item.completed {
            border-left-color: var(--good-color);
            background: rgba(82, 196, 26, 0.05);
        }
        
        .experiment-status {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e9ecef;
            color: #666;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 10px;
        }
        
        .experiment-status.completed {
            background: var(--good-color);
            color: white;
        }
        
        .buckle-counter {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #b8860b;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .challenge-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .challenge-header {
            background: var(--accent-color);
            color: white;
            padding: 15px 20px;
            font-weight: 600;
        }
        
        .challenge-content {
            padding: 20px;
        }
        
        .stats-display {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            font-family: monospace;
        }
        
        .filter-button {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin: 5px;
        }
        
        .filter-button:hover {
            background: #001f54;
        }
        
        .filter-button.active {
            background: var(--good-color);
        }
    </style>
    
    <!-- Buckles System -->
    <script>
        // Excel Filtering Buckles System
        const FilteringBucklesSystem = (function() {
            const STORAGE_KEY = 'excelFilteringBuckles';
            const COMPLETED_PREFIX = 'completedFilteringLab_';
            
            let buckleCounters = [];
            let isAnimating = false;
            
            function init() {
                buckleCounters = document.querySelectorAll('[id$="buckle-score"]');
                updateCounterDisplays();
                createAnimationContainer();
            }
            
            function getBuckles() {
                let count = localStorage.getItem(STORAGE_KEY) || '0';
                return parseInt(count);
            }
            
            function updateBuckles(amount) {
                let total = getBuckles();
                total += amount;
                if (total < 0) total = 0;
                localStorage.setItem(STORAGE_KEY, total.toString());
                updateCounterDisplays();
                return total;
            }
            
            function updateCounterDisplays() {
                const total = getBuckles();
                buckleCounters.forEach(counter => {
                    if (counter.textContent !== total.toString()) {
                        counter.textContent = total.toString();
                        counter.classList.add('buckle-pulse');
                        setTimeout(() => counter.classList.remove('buckle-pulse'), 1000);
                    }
                });
                
                // Also update main counter
                const mainCounter = document.getElementById('main-buckle-score');
                if (mainCounter && mainCounter.textContent !== total.toString()) {
                    mainCounter.textContent = total.toString();
                    mainCounter.classList.add('buckle-pulse');
                    setTimeout(() => mainCounter.classList.remove('buckle-pulse'), 1000);
                }
            }
            
            function isDataLabCompleted(labId) {
                const key = `${COMPLETED_PREFIX}${labId}`;
                return localStorage.getItem(key) === 'true';
            }
            
            function markDataLabCompleted(labId) {
                const key = `${COMPLETED_PREFIX}${labId}`;
                localStorage.setItem(key, 'true');
            }
            
            function awardBuckles(labId, buckleAmount = 2) {
                if (isDataLabCompleted(labId)) return false;
                markDataLabCompleted(labId);
                updateBuckles(buckleAmount);
                showBuckleAnimation();
                return true;
            }
            
            function createAnimationContainer() {
                if (!document.getElementById('buckle-animation')) {
                    const animDiv = document.createElement('div');
                    animDiv.className = 'buckle-animation';
                    animDiv.id = 'buckle-animation';
                    animDiv.style.display = 'none';
                    animDiv.innerHTML = `
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 36 36' width='36' height='36'%3E%3Ccircle cx='18' cy='18' r='16' fill='%23FFD700' stroke='%23DAA520' stroke-width='2'/%3E%3Ctext x='18' y='24' font-family='Arial' font-size='20' font-weight='bold' text-anchor='middle' fill='%23000'%3EB%3C/text%3E%3C/svg%3E" 
                             alt="Buckle" id="buckle-img">
                        <div class="shine"></div>
                    `;
                    document.body.appendChild(animDiv);
                    
                    if (!document.getElementById('buckles-css')) {
                        const styleElement = document.createElement('style');
                        styleElement.id = 'buckles-css';
                        styleElement.textContent = `
                            .buckle-animation {
                                position: fixed; top: 50%; left: 50%;
                                transform: translate(-50%, -50%); z-index: 1000;
                                pointer-events: none; width: 150px; height: 150px;
                                display: flex; align-items: center; justify-content: center;
                            }
                            #buckle-img {
                                width: 100%; height: 100%;
                                filter: drop-shadow(0 0 10px gold);
                                animation: buckleGrow 1.5s ease-out;
                            }
                            .shine {
                                position: absolute; top: 0; left: 0; right: 0; bottom: 0;
                                background: radial-gradient(circle at center, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
                                opacity: 0; animation: shineEffect 1.5s ease-out;
                            }
                            @keyframes buckleGrow {
                                0% { transform: scale(0); opacity: 0; }
                                50% { transform: scale(1.2); opacity: 1; }
                                70% { transform: scale(0.9); }
                                100% { transform: scale(1); }
                            }
                            @keyframes shineEffect {
                                0% { opacity: 0; } 30% { opacity: 0; }
                                50% { opacity: 1; } 100% { opacity: 0; }
                            }
                            .buckle-counter {
                                display: inline-flex; align-items: center; gap: 8px;
                                background-color: rgba(255,215,0,0.1); padding: 8px 12px;
                                border-radius: 20px; border: 2px solid #191919;
                                box-shadow: 0 0.15em 0 #191919;
                            }
                            .buckle-pulse {
                                animation: buckle-pulse 1s cubic-bezier(0.4, 0, 0.6, 1);
                            }
                            @keyframes buckle-pulse {
                                0%, 100% { opacity: 1; transform: scale(1); }
                                50% { opacity: 0.8; transform: scale(1.2); }
                            }
                        `;
                        document.head.appendChild(styleElement);
                    }
                }
            }
            
            function showBuckleAnimation() {
                const animation = document.getElementById('buckle-animation');
                if (animation && !isAnimating) {
                    isAnimating = true;
                    animation.style.display = 'block';
                    setTimeout(() => {
                        animation.style.display = 'none';
                        isAnimating = false;
                    }, 2000);
                }
            }
            
            return {
                init, getBuckles, updateBuckles, updateCounterDisplays,
                awardBuckles, isDataLabCompleted, markDataLabCompleted,
                showBuckleAnimation
            };
        })();
    </script>
    
    <style>
        /* Spreadsheet specific styles */
        .spreadsheet-container {
            background-color: white;
            border: 2px solid var(--outline-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            margin: 15px 0;
            box-shadow: var(--shadow-sm);
        }

        .spreadsheet-header {
            display: flex;
            background-color: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        .cell-header {
            min-width: 120px;
            padding: 8px 12px;
            border-right: 1px solid #dee2e6;
            font-weight: 600;
            text-align: center;
            font-size: 0.9em;
            background-color: #e9ecef;
        }

        .spreadsheet-row {
            display: flex;
        }

        .row-number {
            min-width: 40px;
            padding: 8px;
            border-right: 1px solid #dee2e6;
            background-color: #e9ecef;
            font-weight: 600;
            text-align: center;
            font-size: 0.9em;
        }

        .cell {
            min-width: 120px;
            padding: 8px 12px;
            border-right: 1px solid #dee2e6;
            border-bottom: 1px solid #dee2e6;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            text-align: left;
        }

        .cell:hover {
            background-color: #f8f9fa;
        }

        .cell.filtered-out {
            display: none;
        }

        .spreadsheet-row.filtered-out {
            display: none;
        }

        .filter-dropdown {
            width: 100%;
            border: none;
            background: transparent;
            font-family: inherit;
            padding: 2px 5px;
            cursor: pointer;
            border-radius: 3px;
            font-size: 0.9em;
        }

        .filter-dropdown:focus {
            outline: 2px solid var(--accent-color);
            background-color: white;
        }

        .data-lab {
            background-color: var(--accent-bg);
            border: 2px solid var(--outline-color);
            border-radius: var(--border-radius);
            padding: 25px;
            margin: 30px 0;
            box-shadow: var(--shadow-sm);
        }

        .lab-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .lab-title {
            font-weight: 600;
            font-size: 1.2em;
            margin: 0;
            color: var(--accent-color);
        }

        .lab-reward {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9em;
            color: #666;
        }

        .task-description {
            background-color: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: var(--border-radius);
            padding: 15px;
            margin-bottom: 20px;
            font-size: 1em;
        }

        .lab-btn {
            background-color: var(--accent-color);
            color: white;
            border: 2px solid var(--outline-color);
            border-radius: var(--border-radius);
            padding: 10px 18px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: transform var(--transition-time), box-shadow var(--transition-time);
            box-shadow: var(--shadow-sm);
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .lab-btn:hover {
            transform: translateY(-0.15em);
            box-shadow: var(--shadow-md);
        }

        .lab-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .lab-btn.active {
            background-color: var(--chew-color);
        }

        .success-message {
            display: none;
            background-color: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-top: 20px;
            font-weight: 600;
        }

        .success-message.show {
            display: block;
        }

        .filter-challenge-info {
            background-color: rgba(59, 130, 246, 0.1);
            border-left: 4px solid var(--chunk-color);
            padding: 15px;
            margin: 15px 0;
            border-radius: var(--border-radius);
        }

        .challenge-stats {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .stat-item {
            background-color: white;
            padding: 10px 15px;
            border-radius: var(--border-radius);
            border: 1px solid #dee2e6;
            text-align: center;
            min-width: 80px;
        }

        .stat-number {
            font-size: 1.4em;
            font-weight: bold;
            color: var(--accent-color);
        }

        .stat-label {
            font-size: 0.8em;
            color: #666;
            margin-top: 2px;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .cell, .cell-header {
                min-width: 100px;
                font-size: 0.8em;
            }

            .spreadsheet-container {
                overflow-x: auto;
            }

            .challenge-stats {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Experiment Panel -->
    <div id="experiment-panel" class="experiment-panel">
        <div class="experiment-header">
            <h3><i class="fas fa-flask"></i> Data Detective Experiments</h3>
            <button onclick="toggleExperiments()" style="background: none; border: none; color: white; font-size: 1.2em; cursor: pointer;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div id="experiments-list">
            <!-- Experiments will be populated by JavaScript -->
        </div>
    </div>

    <!-- Sidebar Navigation -->
    <aside class="sidebar" style="overflow-y: auto; overflow-x: hidden;">
        <div class="sidebar-logo">EXCEL FILTERING</div>
        <a href="index.html" class="home-button">
            <i class="fas fa-home"></i>
            HOME
        </a>
        <div class="sidebar-nav">
            <button class="tab-button active" data-tab="lisc">
                <i class="fas fa-clipboard-list"></i>
                LI/SC
            </button>
            <button class="tab-button" data-tab="filtering">
                <i class="fas fa-cube"></i>
                CHUNK
            </button>
            <button class="tab-button" data-tab="practice">
                <i class="fas fa-utensils"></i>
                CHEW
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Buckle Counter -->
        <div class="buckle-counter" style="position: fixed; top: 20px; right: 20px; z-index: 999;">
            <i class="fas fa-medal"></i>
            <span id="main-buckle-score">0</span>
        </div>
        <!-- Learning Intentions and Success Criteria -->
        <section id="lisc" class="tab-content active light-section">
            <h1>LEARNING GOALS & SUCCESS TARGETS <i class="fas fa-bullseye" style="margin-left: 15px;"></i></h1>
            
            <div class="card">
                <div class="element-header" style="margin: -35px -40px 30px -40px; padding: 25px 35px;">
                    <div class="element-number">1</div>
                    <h3>What We're Learning Today <i class="fas fa-lightbulb" style="margin-left: 15px; color: var(--accent-color);"></i></h3>
                </div>
                
                <ul>
                    <li><i class="fas fa-check-circle" style="color: var(--accent-color); margin-right: 12px;"></i> How to find specific information quickly in large spreadsheets</li>
                    <li><i class="fas fa-check-circle" style="color: var(--accent-color); margin-right: 12px;"></i> Using Excel's filter tools like a data detective</li>
                    <li><i class="fas fa-check-circle" style="color: var(--accent-color); margin-right: 12px;"></i> Solving real problems by filtering data</li>
                </ul>
            </div>
            
            <div class="card">
                <div class="element-header" style="margin: -35px -40px 30px -40px; padding: 25px 35px;">
                    <div class="element-number">2</div>
                    <h3>Success Targets <i class="fas fa-trophy" style="margin-left: 15px; color: var(--accent-color);"></i></h3>
                </div>
                
                <p>By the end of this lesson, you'll be able to:</p>
                
                <ul>
                    <li><i class="fas fa-star" style="color: var(--accent-color); margin-right: 12px;"></i> Use basic filters to show only the data you want</li>
                    <li><i class="fas fa-star" style="color: var(--accent-color); margin-right: 12px;"></i> Combine multiple filters to find very specific information</li>
                    <li><i class="fas fa-star" style="color: var(--accent-color); margin-right: 12px;"></i> Clear filters when you want to see all the data again</li>
                    <li><i class="fas fa-star" style="color: var(--accent-color); margin-right: 12px;"></i> Act like a data detective to solve problems</li>
                </ul>
            </div>
        </section>

        <!-- CHUNK: Filtering -->
        <section id="filtering" class="tab-content dark-section">
            <h1>FILTERING: BECOMING A DATA DETECTIVE <i class="fas fa-search" style="margin-left: 15px;"></i></h1>
            
            <div class="chunk-section">
                <div class="chunk-badge">TEACHER CHUNK</div>
                <div class="timer-badge"><i class="fas fa-clock"></i> 10 mins</div>
                
                <h3>What is Filtering?</h3>
                
                <p>Think of filtering like being a detective looking for clues in a giant pile of evidence. Instead of looking through every single piece, you use filters to hide the stuff you don't need and show only what you're looking for!</p>
                
                <div style="background: #e8f4fd; padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h4 style="color: var(--accent-color); margin-top: 0;"><i class="fas fa-lightbulb"></i> Simple Example</h4>
                    <p style="margin-bottom: 0;">Imagine you have a list of 500 students, but you only want to see Year 7 students who play basketball. Instead of scrolling through all 500 names, you can use filters to show just those students!</p>
                </div>
                
                <div class="interactive-card" style="margin-top: 30px;">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">1</div>
                        <h3>How Filtering Works <i class="fas fa-magic" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <div style="display: flex; justify-content: center; margin-bottom: 30px;">
                        <div style="text-align: center;">
                            <i class="fas fa-filter" style="font-size: 4em; color: var(--chunk-color);"></i>
                        </div>
                    </div>
                    
                    <p style="text-align: center; font-weight: bold; font-size: 1.2em; margin-bottom: 25px;">Filtering is like using magic glasses that only show you what you want to see:</p>
                    
                    <div class="elements-grid" style="margin-top: 0;">
                        <div class="icon-box">
                            <div class="icon-container">
                                <i class="fas fa-eye-slash"></i>
                            </div>
                            <div class="icon-text">
                                <h4>Hide the Noise</h4>
                                <p>Make unwanted rows disappear temporarily</p>
                            </div>
                        </div>
                        
                        <div class="icon-box">
                            <div class="icon-container">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            <div class="icon-text">
                                <h4>Focus on What Matters</h4>
                                <p>See only the information that's important</p>
                            </div>
                        </div>
                        
                        <div class="icon-box">
                            <div class="icon-container">
                                <i class="fas fa-undo"></i>
                            </div>
                            <div class="icon-text">
                                <h4>Bring Everything Back</h4>
                                <p>Clear filters to see all your data again</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="interactive-card" style="margin-top: 30px;">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">2</div>
                        <h3>Excel's Filter Tools <i class="fas fa-toolbox" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                        <div style="background: rgba(59, 130, 246, 0.1); padding: 20px; border-radius: var(--border-radius); border-left: 4px solid var(--chunk-color);">
                            <h4><i class="fas fa-chevron-down" style="color: var(--chunk-color); margin-right: 8px;"></i>Basic Filter (AutoFilter)</h4>
                            <p>Little dropdown arrows appear at the top of each column. Click them to choose what you want to see!</p>
                            <div style="background: #f0f7ff; padding: 10px; border-radius: 4px; margin-top: 10px; font-size: 0.9em; border: 1px solid #b3d9ff;">
                                <strong>How to turn on:</strong> Select your data â†’ Data tab â†’ Filter button
                            </div>
                        </div>
                        
                        <div style="background: rgba(16, 185, 129, 0.1); padding: 20px; border-radius: var(--border-radius); border-left: 4px solid var(--chew-color);">
                            <h4><i class="fas fa-sliders-h" style="color: var(--chew-color); margin-right: 8px;"></i>Custom Filter</h4>
                            <p>When you want to filter by things like "greater than 50" or "contains the word 'apple'".</p>
                            <div style="background: #f0fdf4; padding: 10px; border-radius: 4px; margin-top: 10px; font-size: 0.9em; border: 1px solid #bbf7d0;">
                                <strong>How to use:</strong> Click filter arrow â†’ Text/Number Filters â†’ Choose your condition
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="interactive-card" style="margin-top: 30px;">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">3</div>
                        <h3>Common Filter Options <i class="fas fa-list-check" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <div class="two-column-grid" style="margin: 0; gap: 30px;">
                        <div>
                            <h4 style="color: var(--accent-color); margin-bottom: 15px;"><i class="fas fa-font"></i> Text Filters</h4>
                            <ul style="text-align: left; padding-left: 20px; line-height: 2;">
                                <li><strong>Equals:</strong> Find exact matches (like "Apple")</li>
                                <li><strong>Contains:</strong> Find text that includes something (like names with "son")</li>
                                <li><strong>Begins with:</strong> Find text that starts with something (like "A")</li>
                                <li><strong>Does not contain:</strong> Hide text that includes something</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 style="color: var(--accent-color); margin-bottom: 15px;"><i class="fas fa-hashtag"></i> Number Filters</h4>
                            <ul style="text-align: left; padding-left: 20px; line-height: 2;">
                                <li><strong>Greater than:</strong> Show numbers bigger than (like >50)</li>
                                <li><strong>Less than:</strong> Show numbers smaller than (like <20)</li>
                                <li><strong>Between:</strong> Show numbers in a range (like 10-30)</li>
                                <li><strong>Top 10:</strong> Show the 10 highest numbers</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="interactive-card" style="margin-top: 30px;">
                    <div class="element-header" style="margin: -35px -35px 30px -35px; padding: 20px 25px;">
                        <div class="element-number">4</div>
                        <h3>Where You'll Use Filtering <i class="fas fa-lightbulb" style="margin-left: 10px;"></i></h3>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin: 20px 0;">
                        <div style="background: rgba(0, 38, 84, 0.05); padding: 15px; border-radius: var(--border-radius); text-align: center;">
                            <i class="fas fa-gamepad" style="font-size: 2em; color: var(--accent-color); margin-bottom: 10px;"></i>
                            <h4>Gaming Stats</h4>
                            <p style="margin: 5px 0; font-size: 0.9em;">Find your best scores or favourite games</p>
                        </div>
                        <div style="background: rgba(0, 38, 84, 0.05); padding: 15px; border-radius: var(--border-radius); text-align: center;">
                            <i class="fas fa-graduation-cap" style="font-size: 2em; color: var(--accent-color); margin-bottom: 10px;"></i>
                            <h4>School Records</h4>
                            <p style="margin: 5px 0; font-size: 0.9em;">Show students by year level or subject grades</p>
                        </div>
                        <div style="background: rgba(0, 38, 84, 0.05); padding: 15px; border-radius: var(--border-radius); text-align: center;">
                            <i class="fas fa-music" style="font-size: 2em; color: var(--accent-color); margin-bottom: 10px;"></i>
                            <h4>Music Collection</h4>
                            <p style="margin: 5px 0; font-size: 0.9em;">Find songs by artist, genre, or year</p>
                        </div>
                        <div style="background: rgba(0, 38, 84, 0.05); padding: 15px; border-radius: var(--border-radius); text-align: center;">
                            <i class="fas fa-shopping-cart" style="font-size: 2em; color: var(--accent-color); margin-bottom: 10px;"></i>
                            <h4>Shopping Lists</h4>
                            <p style="margin: 5px 0; font-size: 0.9em;">Filter by price range or product category</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CHEW: Practice -->
        <section id="practice" class="tab-content light-section">
            <h1>PRACTICE: DATA DETECTIVE MISSIONS <i class="fas fa-search" style="margin-left: 15px;"></i></h1>
            
            <div class="chew-section">
                <div class="chew-badge">STUDENT ACTIVITY</div>
                <div class="timer-badge"><i class="fas fa-clock"></i> 25 mins</div>
                
                <h3>Interactive Filter Experiments</h3>
                
                <div class="activity-goal">
                    <h4><i class="fas fa-bullseye" style="color: var(--chew-color);"></i> Mission Goals</h4>
                    <ul style="list-style-type: none; padding-left: 0;">
                        <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--chew-color);"></i> Complete experiments using Excel-style filtering</li>
                        <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--chew-color);"></i> Solve data detective challenges step by step</li>
                        <li><i class="fas fa-angle-right" style="margin-right: 12px; color: var(--chew-color);"></i> Earn buckles by mastering filter techniques</li>
                    </ul>
                </div>
                
                <div style="text-align: center; margin: 30px 0;">
                    <button onclick="toggleExperiments()" class="filter-button" style="font-size: 1.1em; padding: 15px 30px;">
                        <i class="fas fa-flask"></i> Open Data Detective Lab
                    </button>
                    <p style="margin-top: 10px; color: #666;">Click above to start your filtering experiments!</p>
                </div>
                
                <!-- Sample data displays -->
                <div class="challenge-card">
                    <div class="challenge-header">
                        <i class="fas fa-table"></i> Video Game Collection Database
                    </div>
                    <div class="challenge-content">
                        <p>Here's a sample of the data you'll be working with in your experiments:</p>
                        
                        <div class="excel-container">
                            <table class="excel-table" id="sample-table">
                                <thead>
                                    <tr>
                                        <th>Game Title <i class="fas fa-chevron-down filter-dropdown"></i></th>
                                        <th>Genre <i class="fas fa-chevron-down filter-dropdown"></i></th>
                                        <th>Platform <i class="fas fa-chevron-down filter-dropdown"></i></th>
                                        <th>Rating <i class="fas fa-chevron-down filter-dropdown"></i></th>
                                        <th>Price <i class="fas fa-chevron-down filter-dropdown"></i></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>Super Adventure Quest</td><td>Adventure</td><td>Nintendo Switch</td><td>8.5</td><td>$59.99</td></tr>
                                    <tr><td>Racing Champions</td><td>Racing</td><td>PlayStation 5</td><td>9.1</td><td>$79.99</td></tr>
                                    <tr><td>Mystery Island</td><td>Puzzle</td><td>PC</td><td>7.8</td><td>$29.99</td></tr>
                                    <tr><td>Battle Arena</td><td>Action</td><td>Xbox Series X</td><td>8.9</td><td>$69.99</td></tr>
                                    <tr><td>Peaceful Farm</td><td>Simulation</td><td>Nintendo Switch</td><td>8.2</td><td>$39.99</td></tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div style="background: #e8f4fd; padding: 15px; border-radius: 6px; margin-top: 15px;">
                            <h4 style="margin-top: 0; color: var(--accent-color);"><i class="fas fa-info-circle"></i> What You'll Learn</h4>
                            <ul style="margin-bottom: 0;">
                                <li>How to use Excel's dropdown filter arrows</li>
                                <li>Filtering by text (like finding all "Adventure" games)</li>
                                <li>Filtering by numbers (like games under $50)</li>
                                <li>Combining multiple filters for complex searches</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Initialize buckles system
        document.addEventListener('DOMContentLoaded', function() {
            FilteringBucklesSystem.init();
            // Update main counter as well
            document.getElementById('main-buckle-score').textContent = FilteringBucklesSystem.getBuckles();
            initializeExperiments();
        });
        
        // Tab navigation
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                
                const tabId = button.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
                button.classList.add('active');
            });
        });
        
        // Experiment system
        function toggleExperiments() {
            const panel = document.getElementById('experiment-panel');
            panel.classList.toggle('active');
        }
        
        function initializeExperiments() {
            const experimentsList = document.getElementById('experiments-list');
            
            const experiments = [
                {
                    id: 'exp1',
                    title: 'Filter by Genre',
                    description: 'Show only Adventure games in the video game collection',
                    buckles: 2,
                    completed: false
                },
                {
                    id: 'exp2', 
                    title: 'Price Range Filter',
                    description: 'Find games under $50 using number filters',
                    buckles: 3,
                    completed: false
                },
                {
                    id: 'exp3',
                    title: 'Platform Detective',
                    description: 'Filter for Nintendo Switch games with rating above 8.0',
                    buckles: 4,
                    completed: false
                },
                {
                    id: 'exp4',
                    title: 'Multi-Filter Master',
                    description: 'Combine genre, platform, and price filters to solve a challenge',
                    buckles: 5,
                    completed: false
                }
            ];
            
            let experimentsHTML = '';
            experiments.forEach((exp, index) => {
                const isCompleted = FilteringBucklesSystem.isDataLabCompleted(exp.id);
                const statusClass = isCompleted ? 'completed' : '';
                const statusIcon = isCompleted ? '<i class="fas fa-check"></i>' : (index + 1);
                
                experimentsHTML += `
                    <div class="experiment-item ${statusClass}" id="${exp.id}-item">
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <div class="experiment-status ${statusClass}">${statusIcon}</div>
                            <h4 style="margin: 0; flex: 1;">${exp.title}</h4>
                            <div class="buckle-counter" style="font-size: 0.8em;">
                                <i class="fas fa-medal"></i> ${exp.buckles}
                            </div>
                        </div>
                        <p style="margin: 10px 0; color: #666;">${exp.description}</p>
                        
                        ${!isCompleted ? `
                            <button onclick="startExperiment('${exp.id}', ${exp.buckles})" 
                                    class="filter-button" style="padding: 8px 16px; font-size: 0.9em;">
                                <i class="fas fa-play"></i> Start Experiment
                            </button>
                        ` : `
                            <div style="color: var(--good-color); font-weight: 600;">
                                <i class="fas fa-check-circle"></i> Completed!
                            </div>
                        `}
                    </div>
                `;
            });
            
            experimentsList.innerHTML = experimentsHTML;
        }
        
        function startExperiment(expId, buckles) {
            // Award buckles and mark as completed
            const awarded = FilteringBucklesSystem.awardBuckles(expId, buckles);
            
            if (awarded) {
                // Update the experiment display
                const expItem = document.getElementById(expId + '-item');
                expItem.classList.add('completed');
                
                const status = expItem.querySelector('.experiment-status');
                status.classList.add('completed');
                status.innerHTML = '<i class="fas fa-check"></i>';
                
                const button = expItem.querySelector('button');
                if (button) {
                    button.outerHTML = `
                        <div style="color: var(--good-color); font-weight: 600;">
                            <i class="fas fa-check-circle"></i> Completed!
                        </div>
                    `;
                }
                
                // Show completion message
                alert(`ðŸŽ‰ Great work! You've earned ${buckles} buckles for completing this experiment!`);
            } else {
                alert('You\'ve already completed this experiment!');
            }
        }
    </script>
</body>
</html>
